<%
  filter_form_path =
    if @project
      project_tasks_path(@project)
    elsif @category
      category_tasks_path(@category)
    elsif @user
      user_tasks_path(@user)
    end
%>

<% if @parent.is_a?(Project) %>
  <%= project_header @parent %>
  <header class="tasks-header">
    <h2>Project Tasks</h2>
    <p><%= render @subscription %></p>
  </header>
<% elsif @parent.is_a?(Category) %>
  <%= category_header @parent %>
  <header class="tasks-header">
    <h2>Category Tasks</h2>
    <p><%= render @subscription %></p>
  </header>
<% elsif @parent.is_a?(User) %>
  <%= user_header @parent %>
  <header class="tasks-header">
    <h2>Created Tasks</h2>
  </header>
<% else %>
  <h1>All Tasks</h1>
  <header class="tasks-header"></header>
<% end %>

<%= render 'tasks/tasks', tasks: @tasks,
                          path: filter_form_path %>
