<% if project_task_subscription.persisted? %>
  <% return unless can?(:destroy, project_task_subscription) %>

  <%= link_to ' Tasks',
              project_task_subscription_path(project, project_task_subscription),
              method: :delete,
              class: 'button button-success button-unsubscribe' %>
<% elsif current_user.subscribed_to_category_tasks?(project.category) %>
  <%= link_to 'Subscribed Thru Category', 'javascript:void(0)',
              class: 'button button-success button-disabled' %>
<% elsif can?(:create, project_task_subscription) %>
  <%= link_to 'Subscribe to Tasks',
              project_task_subscriptions_path(project),
              method: :post, class: 'button button-outline' %>
<% end %>
