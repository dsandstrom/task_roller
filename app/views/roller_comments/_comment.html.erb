<blockquote id="comment-<%= comment.id %>" class="comment">
  <header>
    <p><span class="comment-user"><%= comment.user ? comment.user.name_or_email : User.destroyed_name %></span>:</p>
    <p class="comment-dates">
      <%= formatted_dates comment %>
    </p>
  </header>
  <%= content_tag :main, comment.body_html.html_safe %>

  <% if policy(comment).edit? || policy(comment).destroy? %>
    <footer>
      <p>
        <% if object.is_a?(Task) %>
          <% if policy(comment).edit? %>
            <%= link_to 'edit',
                        edit_task_comment_path(comment) %>
          <% end %>
          <% if policy(comment).destroy? %>
            <%= divider %>
            <%= link_to 'delete',
                        task_comment_path(comment),
                        method: :delete,
                        data: { confirm: 'Are you sure?' } %>
          <% end %>
        <% else %>
          <% if policy(comment).edit? %>
            <%= link_to 'edit',
                        edit_issue_comment_path(comment) %>
          <% end %>
          <% if policy(comment).destroy? %>
            <%= divider %>
            <%= link_to 'delete',
                        issue_comment_path(comment),
                        method: :delete,
                        data: { confirm: 'Are you sure?' } %>
          <% end %>
        <% end %>
      </p>
    </footer>
  <% end %>
</blockquote>
