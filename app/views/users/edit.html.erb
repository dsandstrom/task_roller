<%= user_header @user %>

<div class="columns">
  <div class="first-column">
    <h2>
      Edit
        <% if @user == current_user %>
          Profile
        <% elsif @user.employee_type.blank? %>
          User
        <% else %>
          <%= @user.employee_type %>
        <% end %>
    </h2>

    <%= render 'form', user: @user %>
  </div>
  <div class="second-column">
    <%- if current_user.id == @user.id %>
      <%- if respond_to?(:edit_user_registration_path) %>
        <div class="devise-links">
          <h3>Advanced</h3>
          <%= content_tag :p, link_to('Change your password',
                                      edit_user_registration_path) %>
        </div>
      <% end %>
    <% else %>
      <div class="devise-links">
        <h3>Advanced</h3>

        <% if can?(:promote, @user) %>
          <p>
            <%= link_to 'Change Account Type',
                        edit_promote_user_path(@user) %>
          </p>
        <% end %>

        <% if can?(:cancel, @user) && @user.employee? %>
          <p>
            <%= link_to 'Cancel Account',
                        edit_cancel_user_path(@user),
                        class: 'destroy-link' %>
          </p>
        <% end %>
      </div>
    <% end %>
  </div>
</div>

<p><%= link_to 'Back', :back %></p>
