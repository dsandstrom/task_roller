<div id="user-detail-<%= @user.id %>" class="user-detail">
  <%= user_header @user %>

  <p class="user-email">
    <code><%= @user.email %></code>
  </p>

  <p class=user-links>
    <% if policy(@user).edit? %>
      <%= link_to 'Edit', edit_user_path(@user),
                  class: 'button button' %>
    <% end %>
    <% if policy(@user).destroy? %>
      <%= link_to 'Delete',
                  @user,
                  method: :delete,
                  data: { confirm: 'Are you sure?' },
                  class: 'button button-outline destroy-button' %>
    <% end %>
  </p>

  <% if @user.active_assignments.any? %>
    <div class="user-tasks">
      <header class="tasks-header">
        <h2>Assigned Tasks</h2>
        <p>
          <%= link_to 'View All Assigned Tasks',
                      user_tasks_path(@user, filters: { assigned: @user.id }),
                      class: 'button' %>
        </p>
      </header>
      <div class="tasks">
        <%= render @user.active_assignments %>
      </div>
    </div>
  <% end %>

  <% if @user.unresolved_issues.any? %>
    <div class="user-issues">
      <header class="issues-header">
        <h2>Unresolved Issues</h2>
        <p>
          <%= link_to 'View All Reported Issues', user_issues_path(@user),
                      class: 'button' %>
        </p>
      </header>
      <div class="issues">
        <%= render @user.unresolved_issues %>
      </div>
    </div>
  <% end %>

  <p><%= link_to 'Back', :back %></p>
</div>
