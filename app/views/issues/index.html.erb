<% if @project %>
  <%= project_header @project %>

  <header class="issues-header">
    <h2>Project Issues</h2>

    <% if policy(Issue).new? %>
      <p>
        <%= link_to 'Report Issue',
                    new_project_issue_path(@project),
                    class: 'button button-success' %>
      </p>
    <% end %>
  </header>
<% elsif @category %>
  <%= category_header @category %>
  <header class="issues-header">
    <h2>Category Issues</h2>
  </header>
<% elsif @user %>
  <%= user_header @user %>
  <header class="issues-header">
    <h2>Reported Issues</h2>
  </header>
<% else %>
  <h1>All Issues</h1>
  <header class="issues-header"></header>
<% end %>

<div class="issues">
  <% if @issues.any? || searching? %>
    <%= render 'filter_form', category: @category, project: @project,
                              issues: @issues %>

    <% if @issues.any? %>
      <%= render @issues %>
    <% else %>
      <p class="no-issue">None found</p>
    <% end %>
  <% else %>
    <p class="no-issue">None yet</p>
  <% end %>
</div>

<%= render 'shared/simple_page_links', collection: @issues %>
