<%= render 'shared/comment.js' %>

document.getElementsByName('new_comment_form').forEach((element, i) => {
  element.classList.add('hidden-form');
});

var commentId = 'new_comment';
var comment = document.getElementById(commentId);

if (comment) {
  if (comment.classList.contains('with-hidden-form')) {
    // invalid comment
    comment.classList.remove('with-hidden-form');
  } else {
    var container = comment.querySelector('main');
    if (container) {
      container.innerHTML += "<%= j render('issue_comments/form', issue: @issue, issue_comment: @issue_comment, remote: true) %>";
    }
  }

  comment.classList.add('with-form');
  initCommentForms();
}
