<%
  # TODO: add js form validation
  url =
    if issue_comment.persisted?
      category_project_issue_issue_comment_url(category, project, issue, issue_comment)
    else
      category_project_issue_issue_comments_url(category, project, issue)
    end
  options =
    options_from_collection_for_select(User.all, :id, :name_or_email, issue_comment.user_id)
%>

<%= form_with(model: issue_comment, url: url, local: true,
              html: { name: 'issue_comment_form', novalidate: 'novalidate' }) do |form| %>
  <%= form_errors(form.object) %>

  <%# TODO: remove after adding authentication, should be current user %>
  <div class="field">
    <%= form.label :user_id, 'Author' %>
    <%= form.select :user_id, options, {}, id: :issue_comment_user_id %>
  </div>

  <div class="field">
    <%= required_field_label form, :body %>
    <%= form.text_area :body, id: :issue_comment_body %>
  </div>

  <div class="actions">
    <%= form.submit comment_button_text(issue_comment),
                    class: 'button button-success' %>
  </div>
<% end %>
