<%= render 'shared/comment.js.erb' %>

var commentId = 'comment-' + <%= @task_comment.id %>;
var comment = document.getElementById(commentId);

if (comment) {
  if (comment.classList.contains('with-hidden-form')) {
    comment.classList.remove('with-hidden-form');
  } else {
    var container = comment.querySelector('main');
    if (container) {
      container.innerHTML += "<%= j render('task_comments/form', task: @task, task_comment: @task_comment, remote: true) %>";
    }
  }

  comment.classList.add('with-form');
  initCommentForms();
}

document.querySelectorAll('.new-comment-form.hidden-form').forEach((element, i) => {
  element.classList.remove('hidden-form')
});
